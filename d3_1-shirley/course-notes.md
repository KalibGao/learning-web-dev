Shirley!

http://slides.com/shirleywu/fm-d3intro#/
@sxywu
d3.unconf
metis?

# to-do
Read:  https://github.com/d3/d3/blob/master/API.md#selections-d3-selection
Learn: https://bl.ocks.org/-/about
Use:   https://blockbuilder.org/
Use:   https://blockbuilder.org/search


https://github.com/d3/d3/blob/master/API.md

# AGENDA
D3 Ecosystem

Selections
Data binding
Enter-append

Scales
Shapes

Update & Exit
Transitions

Forces

# D3 Ecosystem

API Reference:

Selections
Scales & Axes
Shapes
Forces

Bl.ocks & Blockbuilder (search)

# Selections and Data

https://github.com/d3/d3-selection

```html
  <svg>
    <rect />
    <rect />
    <rect />
    <rect />
    <rect />
  </svg>
  <script>
    var data = [100, 250, 175, 200, 120];
    
    d3.selectAll('rect')
    	.data(data)
    	.attr('x', (d, i) => i * rectWidth)
    	.attr('y', d => height - d)
    	.attr('width', rectWidth)
    	.attr('height', d => d)
    	.attr('fill', 'blue')
    	.attr('stroke', '#fff');

  </script>
```

Let's analyse this script:

`d3.select/selectAll('css_selector')`
this returns an array with the DOM elements that you've selected, with some functions wrapped around it.
and then all the functions are available to use on these elements.

`.data(data)`
"here's where I think a lot of the magic happens": with this function you pass in an array of data, and d3 will bind the data, one to one, to the elements in your selection. Apparently it creates a property/attribute `__data__` in the element, and its value is the respective value in the array of data that was passed in.

The core of D3 is this: "you take some data and then you apply/bind it to the DOM element and then you can access the data because it's literally been bound to the element in this way."

```javascript
   	.attr('x', (d, i) => i * rectWidth)
   	.attr('y', d => height - d)
   	.attr('width', rectWidth)
   	.attr('height', d => d)
   	.attr('fill', 'blue')
    .attr('stroke', '#fff');
```
"Then once you've bound that to each of the elements, you can use that data do specify what your element should do" (or look like, I guess).

So what d3 does is: loop through each rectangle in the selection, and passes in the data that's been bound to that specific element, as well as the index of that element in that selection array that was generated by d3.select/selectAll. And then you basically use a function to apply that value, that is, to specify what you want returned as the value of, in this case, an attribute.

For example, in `.attr('x', (d, i) => i * rectWidth)` you're saying, "hey, for each of these rectangle elements, this is what I want my x attribute to be.".

Notar que essa função que vai buscar / calcular o valor que se quer atribuir ao atributo em questão deve sempre ter um `return`, para o d3 conseguir identificar o valor que vai ser usado. No entanto, dentro da definição da função, é possível incluir, por exemplo, um `console.log`.

```js
    d3.selectAll('rect')
    	.data(data)
    	.attr('x', function(d, i) {
        console.log(i, d, i * rectWidth, height - d); // logging
        return i * rectWidth})
    	.attr('y', d => height - d)
```

(como eram as seleções no JS mesmo?)
<rect> properties?
como faz console log numa chamada do d3?

